{"version":3,"sources":["../../src/pages/show-quiz/show-quiz.module.ts","../../src/pages/show-quiz/show-quiz.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { SanitizeHtmlPipe } from './../../components/sanitizehtml-pipe/sanitizehtml-pipe';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ShowQuizPage } from './show-quiz';\n\n\n@NgModule({\n  declarations: [\n    ShowQuizPage,SanitizeHtmlPipe\n  ],\n  imports: [\n    IonicPageModule.forChild(ShowQuizPage),\n  ],\n})\nexport class ShowQuizPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/show-quiz/show-quiz.module.ts","import { GetBase64ImageService } from './../../providers/get-base64-image/get-base64-image';\nimport { SanitizeHtmlPipe } from './../../components/sanitizehtml-pipe/sanitizehtml-pipe';\nimport { QuizService } from './../../providers/quiz-service/quiz-service';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams ,AlertController } from 'ionic-angular';\nimport { Injectable } from '@angular/core';\nimport {Observable} from 'rxjs/Observable';\nimport {Observer} from 'rxjs/Observer' ; \nimport { Config, Nav, Platform } from 'ionic-angular';\n\n\n \n/**\n * Generated class for the ShowQuizPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-show-quiz',\n  templateUrl: 'show-quiz.html',\n})\nexport class ShowQuizPage {\npublic questions : any ; \npublic currentQuestionNo = 0 ; \npublic currentQuestion : any ;  \npublic option1  : any ;\npublic option2 :any ; \npublic option3 :any ; \npublic option4 :any ; \npublic testid : any ; \npublic testName : any ; \npublic caller : any ; \npublic base64Image : any ; \npublic matchList = []; \n\nuser : any; \n\n  constructor(public navCtrl: NavController, public navParams: NavParams , private platform: Platform,public alertCtrl: AlertController,public getBase64Image : GetBase64ImageService , public quizService : QuizService) {\n    this.user = localStorage.getItem(\"loggedUser\") ; \n\n    this.caller = navParams.get(\"caller\") ; \n   // console.log ( \"called from \" + this.caller ) ; \n    if (( this.caller == 'summary') || (  this.caller == 'results')) {\n\n     \n      this.currentQuestionNo = navParams.get( \"questionNo\")-1; \n      this.questions = navParams.get(\"questions\"); \n    //  console.log ( \"called from summary . got questions \" + JSON.stringify(this.questions)) ; \n    } else { \n // console.log ( \" showing questions for quiz \"  + navParams.get('testid')) ; \n\n  this.testid = navParams.get('testid') ; \n  this.testName = navParams.get('testName') ; \n    } \n\n \n}\n\nngOnInit() {\n\n\n\n  if (( this.caller != 'summary') && (  this.caller != 'results')) { \n\n   /*for removal of localstorage  \n      \n    if ( localStorage.getItem(\"quizid\"+this.testid)) {\n      //console.log( \" getting JSON from local for \"  + this.testid  +JSON.parse(localStorage.getItem(\"quizid\"+this.testid)) ) ; \n      this.questions = JSON.parse(localStorage.getItem(\"quizid\"+this.testid) ); \n     // console.log( \"questions from local is \" + this.questions[0].text) ; \n    }\n\n    else { \n    */\n\n  this.quizService.getQuestionsForQuiz(this.testid).subscribe( data => { \n    //console.log( \"got this data \" + JSON.stringify( data )) ; \n    this.questions = this.quizService.questions; \n    ; \n    // console.log( \" fininding base64 \") ; \n    //this.transformQuestion(this.questions , this.getBase64Image);\n\n        });\n   // } for removal of localstorage \n  } \n  else {  //console.log( \"chill....\") ;\n }\n\n \n\n}\n\npublic prevQuestion()  {\n\n  this.currentQuestionNo -- ; \n  //console.log( \"showing question  \"+ this.currentQuestionNo) ; \n}\n\npublic nextQuestion(){\n\n  this.currentQuestionNo ++ ;  \n  //console.log( \"showing question \"+ this.currentQuestionNo) ; \n}\n\nshowConfirmAlert(option) {\n   var showMessage =  \"\"; \n   var nextPage = \"\"; \n\n  if ( option == \"submit\") { \n  showMessage = 'Are you sure you want to submit this test?' ; \n  nextPage = \"TestSummaryPage\" ; \n\n  }\n  if ( option == \"back\")\n  {\n  showMessage = \"Are you sure to exit and go to back to test List? \"\n  nextPage = \"TestsListPage\" ; \n  }\n  if ( option == \"logout\")\n  {\n  showMessage = \"Are you sure that you want to logout of the app ? \"\n  nextPage = \"login\" ; \n  }\n\n  let confirmAlert = this.alertCtrl.create({\n    title: 'Are you Sure?',\n    message: showMessage ,\n    buttons: [\n      {\n        text: 'No',\n        handler: () => {\n          console.log('Disagree clicked');\n        }\n      },\n      {\n        text: 'Yes',\n        handler: () => {\n          console.log('Agree clicked'); \n           if ( option == 'logout') {\n             this.logout(); \n           }\n           if ( option == \"submit\") {\n            nextPage = \"TestSummaryPage\" \n          } if ( option == 'back')\n          { nextPage = \"TestsListPage\" ; } \n         \n          var courseid = localStorage.getItem(\"currentCourse\") ; \n          console.log( \" taking to summary page \" + courseid ) ; \n          \n          this.navCtrl.setRoot(  nextPage , { courseid : courseid , questions : this.questions } );\n          \n\n          // Your Imagination should go here\n        }\n      }\n    ]\n  });\n  confirmAlert.present();\n}\n\npublic    transformQuestion(questions , getImage : GetBase64ImageService) { \n\n  \nlet matchStr = /<img src=....*?.gif>/g;\nvar  strMatch  = new String() ; \n\n/*\nwhile (match = matchStr.exec(question)) {\n  console.log(\"Found\", match[0], \"at\", match.index);\n}\n*/\n \n\nlet ImageMap : Map< string , string> = new Map<string, string>  () ; \n\nlet imageURLArr = [] ; \n\n\n\n\nvar serviceCounter = 0 ; \nvar matchCount = 0 ; \nvar gifoffset = 0 ; \nfor ( var i = 0 ; i < questions.length ; i++ ) { \n\n//console.log( \"finding match in \" + questions[i].text) ; \nvar imgURL ; \n//console.log( questions[i].text.replace(/<img src=...*?.gif>/g,    function( match, offset ){   \n  console.log( questions[i].text.replace(/<img src=...*?.gif..*>/g,    function( match, offset ){ \n                                        \n  strMatch = match ; \n\n\n    matchCount++ ; \n//  console.log( \"match is  \" + match  + \"url is \" + offset) ;\n  \n  gifoffset = strMatch.indexOf( \".gif\") ; \n // console.log ( \"got offset for gif \" +  gifoffset   + \">\" + strMatch  + \"<\" + match.length) ; \n  imgURL  = match.substring(9,gifoffset + 4 );\n  //imgURL  = match.substring(9,match.length-1-offset );\n  //console.log( \"get for \" + i + \"-\" +  imgURL ) ;\n   ; \n\n  getImage.getBase64Image(imgURL ).subscribe( data => {\n  serviceCounter ++ ; \n  console.log( \" sericce counter now is \" + serviceCounter ) ; \n  console.log( \" set base64 image for \"  + data + \"to \" + getImage.base64Image );\n  ImageMap.set( data, getImage.base64Image) ; \n\n  //imageURLArr.push( imgURL + '-' + getImage.base64Image  ) ; \n  if ( serviceCounter == matchCount ) { \n   // console.log( \"ImageMap is \" + ImageMap.get(imgURL) ) ; \n\n    for ( var i = 0 ; i < questions.length ; i++ ) { \n    var replaceURL ; \n    questions[i].text = questions[i].text.replace(/<img src=...*?.gif..*>/g,    function( match, offset ){ \n\n      gifoffset = strMatch.indexOf( \".gif\") ;  \n      imgURL  = match.substring(9,gifoffset  + 4 );\n      \n      replaceURL = \"<img src=data:image/jpg;base64,\" + ImageMap.get(imgURL) + \" />\" ; \n      //console.log( \" replacing \" + imgURL + \"with \" + replaceURL) ;\n      return replaceURL ; \n\n    } ) ; \n  }\n    //console.log( \"replaced question Arr  is \" + JSON.stringify(questions) )  ; \n\n\n    }\n\n   \n  }) ; \n\n\n}) );\n\n  }\n  //console.log ( \" match Array is \" + ShowQuizPage.matchList) ; \n // console.log( \" imgURL arre is now \" + imageURLArr.length + imageURLArr   ); \n\n}\n\n\n\n\n\n \n\npublic   toDataUrl(url, callback) {\n  var xhr = new XMLHttpRequest();\n  xhr.onload = function() {\n      var reader = new FileReader();\n      reader.onloadend = function() {\n          callback(reader.result);\n      }\n      reader.readAsDataURL(xhr.response);\n  };\n  xhr.open('GET', url);\n  xhr.responseType = 'blob';\n  xhr.send();\n}\npublic  logout()  {\n   \n  \n  localStorage.removeItem(\"loggedUser\") ; \n\n  this.navCtrl.setRoot('LoginPage');\n\n  }\n\n\npublic flagQuestion() \n{\n\n  this.questions[this.currentQuestionNo].isFlagged = !this.questions[this.currentQuestionNo].isFlagged ;\n // console.log( \"value for flag   toggled \") ; \n}\n\n\n\n  ionViewDidLoad() {\n  //  console.log('ionViewDidLoad ShowQuizPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/show-quiz/show-quiz.ts"],"sourceRoot":""}