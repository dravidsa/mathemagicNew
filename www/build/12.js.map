{"version":3,"sources":["../../src/pages/show-quiz/show-quiz.module.ts","../../src/pages/show-quiz/show-quiz.ts"],"names":[],"mappings":"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","file":"12.js","sourcesContent":["import { SanitizeHtmlPipe } from './../../components/sanitizehtml-pipe/sanitizehtml-pipe';\nimport { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ShowQuizPage } from './show-quiz';\n\n\n@NgModule({\n  declarations: [\n    ShowQuizPage,SanitizeHtmlPipe\n  ],\n  imports: [\n    IonicPageModule.forChild(ShowQuizPage),\n  ],\n})\nexport class ShowQuizPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/show-quiz/show-quiz.module.ts","import { GetBase64ImageService } from './../../providers/get-base64-image/get-base64-image';\nimport { SanitizeHtmlPipe } from './../../components/sanitizehtml-pipe/sanitizehtml-pipe';\nimport { QuizService } from './../../providers/quiz-service/quiz-service';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams ,AlertController } from 'ionic-angular';\nimport { Injectable } from '@angular/core';\nimport {Observable} from 'rxjs/Observable';\nimport {Observer} from 'rxjs/Observer' ; \n\n\n \n/**\n * Generated class for the ShowQuizPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-show-quiz',\n  templateUrl: 'show-quiz.html',\n})\nexport class ShowQuizPage {\npublic questions : any ; \npublic currentQuestionNo = 0 ; \npublic currentQuestion : any ;  \npublic option1  : any ;\npublic option2 :any ; \npublic option3 :any ; \npublic option4 :any ; \npublic testid : any ; \npublic testName : any ; \npublic caller : any ; \npublic base64Image : any ; \npublic matchList = []; \n\n\n\n  constructor(public navCtrl: NavController, public navParams: NavParams , public alertCtrl: AlertController,public getBase64Image : GetBase64ImageService , public quizService : QuizService) {\n  \n    this.caller = navParams.get(\"caller\") ; \n    console.log ( \"called from \" + this.caller ) ; \n    if (( this.caller == 'summary') || (  this.caller == 'results')) {\n\n     \n      this.currentQuestionNo = navParams.get( \"questionNo\")-1; \n      this.questions = navParams.get(\"questions\"); \n      console.log ( \"called from summary . got questions \" + JSON.stringify(this.questions)) ; \n    } else { \n  console.log ( \" showing questions for quiz \"  + navParams.get('testid')) ; \n\n  this.testid = navParams.get('testid') ; \n  this.testName = navParams.get('testName') ; \n    } \n\n\n \n}\n\nngOnInit() {\n\n\n\n  if (( this.caller != 'summary') && (  this.caller != 'results')) { \n\n    if ( localStorage.getItem(\"quizid\"+this.testid)) {\n      console.log( \" getting JSON from local for \"  + this.testid  +JSON.parse(localStorage.getItem(\"quizid\"+this.testid)) ) ; \n      this.questions = JSON.parse(localStorage.getItem(\"quizid\"+this.testid) ); \n      console.log( \"questions from local is \" + this.questions[0].text) ; \n    }\n\n    else { \n    \n  this.quizService.getQuestionsForQuiz(this.testid).subscribe( data => { \n    console.log( \"got this data \" + JSON.stringify( data )) ; \n    this.questions = this.quizService.questions; \n    ; \n    console.log( \" fininding base64 \") ; \n    //this.transformQuestion(this.questions , this.getBase64Image);\n\n        });\n    }\n  } \n  else {  console.log( \"chill....\") ; }\n}\n\npublic prevQuestion()  {\n\n  this.currentQuestionNo -- ; \n  console.log( \"showing question  \"+ this.currentQuestionNo) ; \n}\n\npublic nextQuestion(){\n\n  this.currentQuestionNo ++ ;  \n  console.log( \"showing question \"+ this.currentQuestionNo) ; \n}\n\nshowConfirmAlert() {\n  let confirmAlert = this.alertCtrl.create({\n    title: 'Are you Sure?',\n    message: 'Are you sure you want to submit this test?',\n    buttons: [\n      {\n        text: 'No',\n        handler: () => {\n          console.log('Disagree clicked');\n        }\n      },\n      {\n        text: 'Yes',\n        handler: () => {\n          console.log('Agree clicked');\n          this.navCtrl.setRoot('TestSummaryPage', { questions : this.questions} );\n\n          // Your Imagination should go here\n        }\n      }\n    ]\n  });\n  confirmAlert.present();\n}\n\npublic    transformQuestion(questions , getImage : GetBase64ImageService) { \n\n  \nlet matchStr = /<img src=....*?.gif>/g;\nvar  strMatch  = new String() ; \n\n/*\nwhile (match = matchStr.exec(question)) {\n  console.log(\"Found\", match[0], \"at\", match.index);\n}\n*/\n \n\nlet ImageMap : Map< string , string> = new Map<string, string>  () ; \n\nlet imageURLArr = [] ; \n\n\n\n\nvar serviceCounter = 0 ; \nvar matchCount = 0 ; \nvar gifoffset = 0 ; \nfor ( var i = 0 ; i < questions.length ; i++ ) { \n\nconsole.log( \"finding match in \" + questions[i].text) ; \nvar imgURL ; \n//console.log( questions[i].text.replace(/<img src=...*?.gif>/g,    function( match, offset ){   \n  console.log( questions[i].text.replace(/<img src=...*?.gif..*>/g,    function( match, offset ){ \n                                        \n  strMatch = match ; \n\n\n    matchCount++ ; \n  console.log( \"match is  \" + match  + \"url is \" + offset) ;\n  \n  gifoffset = strMatch.indexOf( \".gif\") ; \n  console.log ( \"got offset for gif \" +  gifoffset   + \">\" + strMatch  + \"<\" + match.length) ; \n  imgURL  = match.substring(9,gifoffset + 4 );\n  //imgURL  = match.substring(9,match.length-1-offset );\n  console.log( \"get for \" + i + \"-\" +  imgURL ) ;\n   ; \n\n  getImage.getBase64Image(imgURL ).subscribe( data => {\n  serviceCounter ++ ; \n  console.log( \" sericce counter now is \" + serviceCounter ) ; \n  console.log( \" set base64 image for \"  + data + \"to \" + getImage.base64Image );\n  ImageMap.set( data, getImage.base64Image) ; \n\n  //imageURLArr.push( imgURL + '-' + getImage.base64Image  ) ; \n  if ( serviceCounter == matchCount ) { \n    console.log( \"ImageMap is \" + ImageMap.get(imgURL) ) ; \n\n    for ( var i = 0 ; i < questions.length ; i++ ) { \n    var replaceURL ; \n    questions[i].text = questions[i].text.replace(/<img src=...*?.gif..*>/g,    function( match, offset ){ \n\n      gifoffset = strMatch.indexOf( \".gif\") ;  \n      imgURL  = match.substring(9,gifoffset  + 4 );\n      \n      replaceURL = \"<img src=data:image/jpg;base64,\" + ImageMap.get(imgURL) + \" />\" ; \n      //console.log( \" replacing \" + imgURL + \"with \" + replaceURL) ;\n      return replaceURL ; \n\n    } ) ; \n  }\n    console.log( \"replaced question Arr  is \" + JSON.stringify(questions) )  ; \n\n\n    }\n\n   \n  }) ; \n\n\n}) );\n\n  }\n  //console.log ( \" match Array is \" + ShowQuizPage.matchList) ; \n  console.log( \" imgURL arre is now \" + imageURLArr.length + imageURLArr   ); \n\n}\n\n\n\n\n\n \n\npublic   toDataUrl(url, callback) {\n  var xhr = new XMLHttpRequest();\n  xhr.onload = function() {\n      var reader = new FileReader();\n      reader.onloadend = function() {\n          callback(reader.result);\n      }\n      reader.readAsDataURL(xhr.response);\n  };\n  xhr.open('GET', url);\n  xhr.responseType = 'blob';\n  xhr.send();\n}\n\n\n/*\npublic  replaceImage( match , url) {\n\nconsole.log( \"match is  \" + match  + \"url is \" + url) ;\n\nURL  = match.substring(9,match.length-1) ; \nconsole.log ( \"finding data url for \" + URL ); \n//console.log( \" this is good \" + this.questions); \n\nShowQuizPage.toDataUrl(URL , function(myBase64) {\n    console.log(myBase64); // myBase4 is the base64 string\n    \n    return myBase64 ; \n});\n\n\n}\n*/\n\npublic flagQuestion() \n{\n\n  this.questions[this.currentQuestionNo].isFlagged = !this.questions[this.currentQuestionNo].isFlagged ;\n  console.log( \"value for flag   toggled \") ; \n}\n\n\n\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ShowQuizPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/show-quiz/show-quiz.ts"],"sourceRoot":""}